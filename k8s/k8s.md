Kubernetes 정리
=====
K8S 사용하면서 에러 혹은 중요한 사항 정리용
-----
*****
### 서비스 정의
쿠버네티스의 서비스는 pod와 비슷한 REST 오브젝트. 모든 REST오브젝트와 마찬가지로,
서비스 정의를 API서버에 POST하여 인스턴스를 생성할 수 있음.  

예를 들어, 각각 TCP포트 9376에서 수신하고 `app=MyApp` 레이블을 가지고 있는 pod세트가 있다고 가정  
```
apiVersion: v1
kind: Service
metadata:
  name: my-service
spec:
  selector:
    app: MyApp
  ports:
    - protocol: TCP
      port: 80
      targetPort: 9376
```
이 yaml파일은 "my-service"라는 새로운 서비스 오브젝트를 생성하고, `app=MyApp` 레이블을 가진 pod의 TCP9376 포트를 대상으로 함
쿠버네티스는 이 서비스에 서비스 프록시가 사용하는 IP 주소("cluster IP"라고 불리는 것)를 할당.  
서비스의 기본 프로토콜은 TCP. 다른 프로토콜을 사용할 수도 있음.

####지원 프로토콜
> **TCP**: 모든 종류의 서비스에 TCP 사용가능. 기본 네트워크 프로토콜    
> **HTTP**: 클라우드 공급자가 이를 지원하는 경우, LoadBalancer 모드의 서비스를 사용하여 서비스의 엔드포인트로 전달하는 외부 HTTP/HTTPS
> 리버스 프록시 설정 가능.  
> **PROXY 프로토콜**: 클라우드 공급자가 지원하는 경우에, LoadBalancer 모드의 서비스를 사용, 쿠버 자체 외부에 로드 밸런서를 구성할 수 있으며, 
> 이때 접두사가 PROXY 프로토콜인 연결을 전달하게 됨  
> 
> 이 외에도 지원되는 프로토콜이 더 있음. 우선 중요해 보이는 것만 정리.

많은 서비스가 하나 이상의 포트를 노출해야 하기 때문에, 쿠버는 서비스 오브젝트에서 다중 포트 정의를 지원. 각 포트는 동일 혹은 다른 프로토콜로 정의될 수 있음.  

 


